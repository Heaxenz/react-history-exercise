{"ast":null,"code":"var _jsxFileName = \"/Users/heaxenz/School/section-28/react-history-exercise/src/JokeList.js\",\n  _s = $RefreshSig$();\nimport React, { Component, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Joke from \"./Joke\";\nimport \"./JokeList.css\";\n\n/** List of jokes. */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst JokeList = ({\n  numJokesToGet = 5\n}) => {\n  _s();\n  const [jokes, setJokes] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  /* retrieve jokes from API */\n  useEffect(() => {\n    async function getJokes() {\n      let jok = [...jokes];\n      let seenJokes = new Set();\n      while (jok.length < numJokesToGet) {\n        let res = await axios.get('https://icanhazdadjoke.com', {\n          headers: {\n            Accept: 'application/json'\n          }\n        });\n        let {\n          ...jokeobj\n        } = res.data;\n        if (!seenJokes.has(jokeobj.id)) {\n          seenJokes.add(jokeobj.id);\n          jok.push({\n            ...jokeobj,\n            votes: 0\n          });\n        } else {\n          console.error('DUPLICATE FOUND!!');\n        }\n      }\n      setJokes(jok);\n      setIsLoading(false);\n    }\n    if (jokes.length === 0) getJokes();\n  }, [jokes, numJokesToGet]);\n  const generateNewJokes = () => {\n    setIsLoading(true);\n    setJokes([]);\n  };\n  const vote = (id, delta) => {\n    setJokes(jokes => jokes.map(j => j.id === id ? {\n      ...j,\n      votes: j.votes + delta\n    } : j));\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fas fa-4x fa-spinner fa-spin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this);\n  }\n  let sortedJokes = [...jokes].sort((a, b) => b.votes - a.votes);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"JokeList\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"JokeList-getmore\",\n      onClick: generateNewJokes,\n      children: \"Get New Jokes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }, this), sortedJokes.map(({\n      id,\n      joke,\n      votes\n    }) => /*#__PURE__*/_jsxDEV(Joke, {\n      joke: joke,\n      id: id,\n      votes: votes,\n      vote: vote\n    }, id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 15\n  }, this);\n};\n_s(JokeList, \"+iu6xHPOscTV/FNdMPqy/q1M2A4=\");\n_c = JokeList;\nexport default JokeList;\nvar _c;\n$RefreshReg$(_c, \"JokeList\");","map":{"version":3,"names":["React","Component","useEffect","useState","axios","Joke","jsxDEV","_jsxDEV","JokeList","numJokesToGet","_s","jokes","setJokes","isLoading","setIsLoading","getJokes","jok","seenJokes","Set","length","res","get","headers","Accept","jokeobj","data","has","id","add","push","votes","console","error","generateNewJokes","vote","delta","map","j","className","children","fileName","_jsxFileName","lineNumber","columnNumber","sortedJokes","sort","a","b","onClick","joke","_c","$RefreshReg$"],"sources":["/Users/heaxenz/School/section-28/react-history-exercise/src/JokeList.js"],"sourcesContent":["import React, { Component, useEffect, useState } from \"react\";\n\nimport axios from \"axios\";\nimport Joke from \"./Joke\";\nimport \"./JokeList.css\";\n\n\n/** List of jokes. */\n\nconst JokeList = ({ numJokesToGet = 5 }) => {\n    const [jokes, setJokes] = useState([])\n    const [isLoading, setIsLoading] = useState(true)\n\n\n    /* retrieve jokes from API */\n    useEffect(() => {\n        async function getJokes() {\n            let jok = [...jokes];\n            let seenJokes = new Set();\n            while (jok.length < numJokesToGet) {\n                let res = await axios.get('https://icanhazdadjoke.com', {\n                    headers: { Accept: 'application/json' }\n                });\n                let { ...jokeobj } = res.data\n                if (!seenJokes.has(jokeobj.id)) {\n                    seenJokes.add(jokeobj.id);\n                    jok.push({ ...jokeobj, votes: 0 })\n                } else {\n                    console.error('DUPLICATE FOUND!!')\n                }\n            }\n            setJokes(jok);\n            setIsLoading(false);\n        }\n        if(jokes.length === 0) getJokes();\n    }, [jokes, numJokesToGet])\n   \n\n\n    const generateNewJokes = () =>{\n        setIsLoading(true);\n        setJokes([]);\n\n    }\n\n    const vote = (id, delta) => {\n        setJokes(jokes => jokes.map(j => (j.id === id ? { ...j, votes: j.votes + delta}: j)))\n    }\n    \n    if(isLoading){\n        return (\n            <div className=\"loading\">\n                <i className=\"fas fa-4x fa-spinner fa-spin\" />\n            </div>\n        )\n    }\n    let sortedJokes = [...jokes].sort((a,b) => b.votes - a.votes)\n\n    return (\n              <div className=\"JokeList\">\n                <button\n                  className=\"JokeList-getmore\"\n                  onClick={generateNewJokes}\n                >\n                  Get New Jokes\n                </button>\n                {sortedJokes.map(({id, joke, votes}) => (\n                    <Joke\n                        joke={joke}\n                        id={id}\n                        key={id}\n                        votes={votes}\n                        vote={vote}\n                    />\n                ))}\n               \n              </div>\n            );\n\n\n}\n\nexport default JokeList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}